<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>WRanalysis: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">WRanalysis
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">WRanalysis Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Download instructions: <a class="el" href="instructions_.html">Instructions</a></p>
<dl class="section user"><dt>Main configuration file</dt><dd>Trying to collect all possible configurable things in a configuration file in configs/. The file is <b>configs/2015-v1.conf</b> </dd></dl>
<p>Currently the following informations are stored there:</p>
<ul>
<li>json file</li>
<li>dataset file (configs/datsets.dat)</li>
</ul>
<dl class="section user"><dt>Datasets</dt><dd>The list of datasets is written in <pre class="fragment">configs/datasets.dat
</pre></dd></dl>
<p><a class="el" href="triggers.html">Triggers</a> List of triggers used to filter events at preselection level</p>
<dl class="section user"><dt>How to estimate cross sections</dt><dd>Once the dataset is entered in the datasets.dat config file putting dashes for cross section, cross section uncetainty, then you can use the script <pre class="fragment"> ./scripts/getXsec.sh
</pre> to update the file with the estimated cross sections Cross sections for SM processes can be found here: ttps://twiki.cern.ch/twiki/bin/viewauth/CMS/StandardModelCrossSectionsat13TeV</dd></dl>
<p>Instructions on how to get the cross sections of a MC sample: <a href="https://twiki.cern.ch/twiki/bin/view/CMS/HowToGenXSecAnalyzer">https://twiki.cern.ch/twiki/bin/view/CMS/HowToGenXSecAnalyzer</a></p>
<dl class="section user"><dt>Skims</dt><dd><a class="el" href="skim_page.html">Skim</a> </dd></dl>
<dl class="section note"><dt>Note</dt><dd>microAOD_cff</dd></dl>
<p>In order to make the skims: </p>
<pre class="fragment">scripts/crabSkimJobs/makeAndRunCrabSkimScripts.sh
</pre><p> and then submit the relevant crab tasks</p>
<pre class="fragment">for skim in tmp/skim*.py; do crab submit -c $skim; done
</pre><p>To update the list of datasets with the published skims: </p>
<pre class="fragment">scripts/crabSkimJobs/updateDatasetsWithSkims.sh
</pre><dl class="section user"><dt>JEC</dt><dd>The twiki page is:  <a href="https://twiki.cern.ch/twiki/bin/viewauth/CMS/JECDataMC">https://twiki.cern.ch/twiki/bin/viewauth/CMS/JECDataMC</a></dd></dl>
<p>74X_mcRun2_asymptotic_v4</p>
<dl class="section user"><dt>Running the analysis</dt><dd>the cfg to be used is <pre class="fragment">test/runAnalysis_cfg.py
</pre></dd></dl>
<p>There are three paths defined:</p>
<ul>
<li>SignalRegion</li>
<li>FlavourSideband</li>
<li>LowDiLeptonSideband</li>
</ul>
<p>A simple blinding filter is used if option isMC is set to 0 (so for data). This can be improved</p>
<dl class="section user"><dt>selection ID scale factors</dt><dd></dd></dl>
<p>Electrons: <a href="https://cds.cern.ch/record/2118397/export/hx?ln=en">https://cds.cern.ch/record/2118397/export/hx?ln=en</a></p>
<p>Muons: <a href="https://twiki.cern.ch/twiki/bin/viewauth/CMS/MuonReferenceEffsRun2">https://twiki.cern.ch/twiki/bin/viewauth/CMS/MuonReferenceEffsRun2</a></p>
<dl class="section user"><dt>Energy corrections</dt><dd>muons <a href="https://twiki.cern.ch/twiki/bin/viewauth/CMS/RochcorMuon">https://twiki.cern.ch/twiki/bin/viewauth/CMS/RochcorMuon</a></dd></dl>
<dl class="section user"><dt>Making data/MC comparison plots</dt><dd>To make the data/MC plots for the flavor and low dilepton mass sidebands, first run the analysis code with only 1 toy. For flavor sideband: Edit the analysis.cpp file for nToys=1 and channel=Selector::EMu. The script will loop over all the datasets and produce root files called selected_tree_*_flavoursideband2.root. <pre class="fragment">make;./bin/analysis
</pre> These files are the input to the plotting script. To make the plots, edit the plotting script so that the channel matches the one chosen in the analysis script. Make channel = Selector::EMu <pre class="fragment">cd test
mkdir test/plots/Flavor
mkdir test/plots/EELowDilepton
mkdir test/plots/MuMuLowDilepton
root -b miniPlotter.C
</pre></dd></dl>
<p>Repeat the previous steps with the different channel options(EE or MuMu).</p>
<dl class="section user"><dt>GIT instructions</dt><dd>The main branch is downloaded by default the first time you download the code. It is <b>shervinWorking</b> </dd></dl>
<p>Developers have to: </p>
<pre class="fragment">git checkout shervinWorking
git pull
git branch myWorkingBranch
git checkout myWorkingBranch
...
...
git add files_you_have_worked_on.cc
git commit -m "new point in the history, this is a comment to make clear which are the changes"
...
...
git add files_you_have_worked_on.cc
git commit -m "another commit"
# to make sure what you did works
scram b -j16 &amp;&amp; cmsRun test/runAnalysis_cfg.py test=3
git push origin myWorkingBranch:myWorkingBranch
git checkout shervinWorking
</pre><dl class="section user"><dt>miniTree production</dt><dd><pre class="fragment">./scripts/makeLSFTTreeScripts.sh
for file in tmp/analysis_WRto*.cfg tmp/analysis_TTJets_DiLept_v*.cfg tmp/analysis_DY*powheg*.cfg ; do crab -create -submit -cfg $file; done
</pre> </dd></dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Apr 18 2016 22:12:42 for WRanalysis by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
