<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>cms-WR: Introduction</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="page1">Introduction </a></h1><div class="fragment"><pre class="fragment">
############################################################
## ECALELF (Ecal CALibration with ELectrons Framework)  
## study and calibration with Zee and E/p
############################################################
</pre></div><p>All the code needed to the ECAL studies and calibration with Zee is available in this package.</p>
<p>The documentation of this packaged is provided in these pages extracted with doxygen from the source code and several txt files contained in the package itself.</p>
<p>The code in this package takes the name of ECALELF (Ecal CALibration with ELectrons Framework)</p>
<p>Informations for the implementation or re-implementation can be obtained looking the the various header files that will be completed with exaustive documentation (in the future)</p>
<p>If you have doxygen, you can run the command </p>
<div class="fragment"><pre class="fragment"> doxygen fulldoc  
</pre></div><p> from the Calibration/ directory and you can navigate instructions and code locally with </p>
<div class="fragment"><pre class="fragment"> firefox doc/doxygen/fulldoc/html/index.html 
</pre></div><p>The general calibration workflow is: </p>
<div align="center">
<img src="doc/ecalelf_schema.png" alt="ecalelf_schema.png"/>
</div>
 <p>1) start from AOD/RECO or AOD/RECO+RAW</p>
<p>1.1a) apply a ZSkim or a ZSCSkim or a WSkim selection to reduce the size of the dataset</p>
<p>2a) produce the ALCARAW from AOD/RECO+RAW: in this format most of the collections are dropped and only the electrons, the uncalibrated rec hits and few other collections like the beamspot, the conversions, the rhoFastJet are kept</p>
<p>3a) Apply whatever ECAL tags (ADCtoGeV, IC, LC, Alpha) needed for test or calibration and produce a new file in ALCARECO format. The new file has a reduced collection of calibrated rechit of the reco electrons, new SC collections produced with the new calibrated recHits, the old reco electrons with a new SC associated CAVEAT: all the electron variables are still the old RECO one, only the reference to the new SC has been updated. This will not be fixed, since it's a wanted feature that ensures that the selected events are not changed and permit to check effectively the impact of the calibration on the same events.</p>
<p>4) calculate new electron energies with the EleNewEnergiesProducer that creates ValueMaps that associate a float (the new energy) to the electrons</p>
<p>5) define if the electron pass some selections running the EleSelectionProducer that creates valueMaps of floats with the following meaning: for cut-based selections 1=pass, 0=fail for MVA selections the float is the output of the MVA</p>
<p>6.0) for MC, produce an association map between reco electron and gen electron (data-MC match)</p>
<p>6.1) produce a patElectron collection where the electronID floats and the new energies are imported by the patElectron and accessible by electron.electronID("selectionName") electron.userFloat("energyName") the gen electron identified by the data-MC matching step are embended in the patElectron and accessible by: electron.genLepton().eta() electron.genLepton().energy()</p>
<p>7) Filter the events requiring that the electron has passed at least one selection</p>
<p>8) dump the event content to a flat tree with one entry for Zee candidate (the variables are array of two elements with one electron per element)</p>
<p>9) Run the analysis tools (Z fitter, smearing, etc.)</p>
<p>In case the purpose is just to run on a particular dataset without any recalibration step, the 1-3a) steps can be replaced by</p>
<p>1b) Start from RECO or AOD 2b) Produce directly the ALCARECO, dropping all the unuseful collections and reducing the recHit maps to the one related to the electrons 3b) nothing</p>
<p>## For further implementations Step 5) could be done after step 1) since electronID and isolations are not updated by the sandbox recalibration and then could be performed just once.</p>
<p>Good luck! </p>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 26 Jan 2015 for cms-WR by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
